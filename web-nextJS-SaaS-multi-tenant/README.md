# CMS - Canteen Management System (Frontend)

CMS is a SaaS-based multi-tenant application built to streamline and manage administrative activities of canteen operations. This project focuses solely on the frontend, enabling canteen administrators to efficiently handle tasks like tenant management, order processing, menu management, and reporting, all within a scalable and customizable platform.

## Technologies Used

- [Next.js 15](https://nextjs.org/docs/getting-started)
- [HeroUI v2](https://heroui.com/)
- [Tailwind CSS](https://tailwindcss.com/)
- [Tailwind Variants](https://tailwind-variants.org)
- [TypeScript](https://www.typescriptlang.org/)
- [Framer Motion](https://www.framer.com/motion/)
- [next-themes](https://github.com/pacocoursey/next-themes)
- [Redux-Toolkit](https://redux-toolkit.js.org/introduction/getting-started)
- [Redux-Saga](https://redux-saga.js.org/docs/introduction/GettingStarted)

## Prerequisites âœ…
Before getting started, make sure you have the following installed:

- Node.js: Version 18.18.0 or higher. Download Node.js
- React: Version 19

## Getting Started ğŸš€
Ready to dive into the CMS - Canteen Management System? Just follow these simple steps to get your local environment up and running!

### Install dependencies
```bash
npm install
```

### Configure Your Environment ğŸŒ
Create a `.env` file at the root of the project and add the following lines:
```env
NEXT_PUBLIC_BASE_URL=<your-base-url>
```

### Start the Development Server âš¡
```bash
npm run start:dev
```

### Open the App
Visit http://localhost:3000 in your browser to see your app in action!  
That's it! Happy coding! ğŸ‰

---

## ğŸ“ Project Folder Structure
- We are following Next.js App Router.

```txt
app/
â”œâ”€â”€ (auth)/
â”‚   â”œâ”€â”€ login/
â”‚   â”œâ”€â”€ register/
â”‚   â””â”€â”€ tenant/
â”‚       â”œâ”€â”€ specs/
â”‚       â”œâ”€â”€ styles/
â”‚       â”œâ”€â”€ constants.ts
â”‚       â”œâ”€â”€ interfaces.ts
â”‚       â”œâ”€â”€ page.tsx
â”‚       â””â”€â”€ layout.tsx
â”œâ”€â”€ (main)/
â””â”€â”€ shared/
    â”œâ”€â”€ cms-components/
    â”œâ”€â”€ hoc-components/
    
â”œâ”€â”€ AuthInitializer.tsx
â”œâ”€â”€ constants.ts
â”œâ”€â”€ interfaces.ts
|â”€â”€ layout.tsx
â”œâ”€â”€ providers.tsx
â”œâ”€â”€ ScreenValidator.tsx
â””â”€â”€ SessionTimeout.tsx

lib/
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ hooks.ts
â”‚   â”œâ”€â”€ interfaces.ts
â”‚   â”œâ”€â”€ rootSaga.ts
â”‚   â”œâ”€â”€ rootState.ts
â”‚   â””â”€â”€ store.ts

network/
â”œâ”€â”€ apiConfig.ts
â”œâ”€â”€ constants.ts
â”œâ”€â”€ httpClient.ts
â”œâ”€â”€ httpUtils.ts
â””â”€â”€ interfaces.ts

public/
â”œâ”€â”€ icons/
â””â”€â”€ screenshots/

server/
â”œâ”€â”€ httpServer.ts

utils/
â”œâ”€â”€ commonConstants.ts
â”œâ”€â”€ commonTypes.ts
â”œâ”€â”€ commonUtils.ts
â””â”€â”€ index.ts

components/
config/
styles/
types/

```

---

## Common Issues

### Unable to access environment variables declared in the .env file

#### Solution: 
Ensure that you have prefixed the variable name with **NEXT_PUBLIC_** when trying to access it on the client-side. By default, environment variables are only accessible on the server. To expose them publicly for use in the browser, you must add this prefix.

### NGROK access issues
If you encounter an error while running the backend server through NGROK, including error code 69420, follow the fix below.

#### Fix
Add the following line to your request headers in *_network/httpUtils_* - *_getHeaders_*:
```
"ngrok-skip-browser-warning": "69420"
```

### CORS issues
**Fix:**  
Enable CORS in your NestJS backend:
```ts
app.enableCors();
```

---

## ğŸ› ï¸ Troubleshooting Guide: Common Errors and Solutions

### â—ï¸ Mixing Client and Server Component Code

- **Error**: Using **server-only logic** (like `next-cookies`, or `headers()`) inside **client components** OR using **client hooks** (`useState`, `useMemo`, `useRouter`) inside **server components** will throw an error or cause unpredictable issues like hydration mismatches.

![Invalid Hook Usage](https://drive.google.com/file/d/109iJlgKcPTttuXf7VrSUILQkVIBK3yW9/view?usp=drive_link)

- **Fix**:  âœ… Always use the `"use client"` directive at the top of files meant to be client components.  

![Server only logic in client component](https://drive.google.com/file/d/1jfscyIB9LgOOZpSRqcnTt5kUwrL7R8Rg/view?usp=sharing) 

 - **Fix**:  âœ… Components are **server-side by default** in Next.js App Router. Be explicit with `"use client"` when using hooks or browser APIs.

---

## ğŸ§± Major Challenges

### Hydration Errors
âŒ Happens when the client-rendered HTML doesn't match the HTML generated by the server.

![Hydration Errors](https://drive.google.com/file/d/1e8nhOSzWeztlB8BBRhK_l6X24I7E3S_X/view?usp=drive_link)

âš ï¸ Common causes:
- Missing "use client" in components using hooks (useState, useRouter, etc.)
- Accessing browser-only APIs (window, document) in server components
- Rendering dynamic content inconsistently between client and server

âœ… Fix: Always use "use client" at the top of your client component files and ensure no browser-specific code runs on the server.

---

## ğŸŒŸ Best Practices & Pitfalls to Avoid

### ğŸ“ Files & Folders

- Add **reusable components** in `shared/cms-components/`
- Add **HOC components** in `shared/hoc-components/`
- Use `lib/features/` for defining **Redux slices** and **sagas** (module-wise)
- Use the global `utils/` folder for **shared utility functions**
- Use `public/icons` to add icon SVG files ([See how to add new Icon in CMS frontend](https://docs.google.com/document/d/1i8yERSzylFclX50NdGt0xydkg7isDUF8wuVIWubCTQ8/edit?tab=t.0#heading=h.efpixub27t9s))
- Use `public/assets` to add all image files

---

### ğŸ§± Naming Conventions

- Folder names: `kebab-case`
- File names: `camelCase`
- Component names: `PascalCase`
- Specs (test) files: `PascalCase`

---

### ğŸ§ª Test Case Guidelines

- Write test cases for all components inside their respective `specs/` folders
- Include:
  - Rendering
  - Validations
  - Structure assertions
- Avoid testing pure logic in component test files

---

### ğŸ› ï¸ Development Guidelines

- Break large components into smaller ones
- Use `useMemo` and `useCallback` **only for heavy computations or expensive operations** â€” avoid using them unnecessarily in every component
- Create **custom hooks** only when logic is reused across multiple components â€” avoid over-abstracting single-use logic
- Always add `"use client"` at the top for client components to prevent hydration errors
- Avoid excessive `useEffect` usage
- Avoid inline styles; use `styles/` folder with `.scss` files
- Name **slices and sagas** clearly as per module name
- Use `httpClient` utility for **client-side** API calls
- Use `httpServer` utility for **server-side** API calls
- Use helper utilities like `isMissing` / `notMissing` instead of manual `if (value === null)`
- Add skeletons for loading states
- Create `loading.tsx`, `error.tsx`, and use **Suspense boundaries**
- Prefer **server components** for SEO-critical pages
- Use **client components** for interactive, dynamic UI
- Leverage **Next.js built-in features** effectively

---

### âœ… After Development

- Run tests:
```bash
npm run test
```

- Validate build & run locally:
```bash
npm run build
npm run start
```

âœ… Push your code **only after** confirming that tests pass, the build succeeds, and the app runs without errors.

ğŸ‰ Thatâ€™s it â€” youâ€™re all set to go!  
âœ… You can now safely **push your code** with confidence! ğŸš€
